class WODandDef():
    def __init__(self,dataIn,fileName):
        # Inputs
        self.dataIn = dataIn
        self.fileName = fileName
        # Class variables
        self.allWordsPrevShown = None
        self.positionOfWOD = None
        # Functions to run
        self.areAllWordsPrevShown() # if yes, go back to start of list
        self.getWODpositionAndUpdateList()
        self.updateJSONfile()

    def areAllWordsPrevShown(self):
        # Check to see if the entire list of words has been presented (for this round)
        self.allWordsPrevShown = all(word['WOD_shown'] for word in self.dataIn)

    def getWODpositionAndUpdateList(self):       
        # Get WOD and update word list accordingly
        if (self.allWordsPrevShown):
            for word in self.dataIn[1:]: # change all 'WOD_shown' to false, except the first
                word['WOD_shown'] = False
            self.positionOfWOD = 0    
        else:
            self.positionOfWOD = self.firstFalse_WOD_shown()
            self.dataIn[self.positionOfWOD]['WOD_shown'] = True
    
    def firstFalse_WOD_shown(self):
        for index, word in enumerate(self.dataIn):
            if not word['WOD_shown']:
                return index
        return None  

    def updateJSONfile(self):
        with open(self.fileName, 'w') as file:
            json.dump(self.dataIn, file, indent=4)  

    def getAndreturnWOD(self): 
        WOD = self.dataIn[self.positionOfWOD]['word']
        definition = self.dataIn[self.positionOfWOD]['definition']
        return WOD, definition

    